<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="03-methods_files/libs/clipboard/clipboard.min.js"></script>
<script src="03-methods_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="03-methods_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="03-methods_files/libs/quarto-html/popper.min.js"></script>
<script src="03-methods_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="03-methods_files/libs/quarto-html/anchor.min.js"></script>
<link href="03-methods_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03-methods_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="03-methods_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="03-methods_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="03-methods_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="03-methods_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="03-methods_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="method" class="level1">
<h1>Method</h1>
<p>Social mobility effects—understood as impacts on an outcome arising from movements between an origin state and a destination state (e.g., social class)—have long been a focus of sociological research <span class="citation" data-cites="eyles_social_2022 langsaether_explaining_2022">[@eyles_social_2022; @langsaether_explaining_2022]</span>. Yet, as Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024, p.467]</span> emphasize, most of the mobility hypotheses are, at their core, individual-level counterfactual comparisons between the observed outcome under a mobility trajectory and the outcome the same person would have shown if they had remained in their origin class (or moved to an alternative destination). Standard specifications (e.g., SAM, DRM, and mobility-contrast models) struggle to retrieve these inherently counterfactual quantities due to identification constraints and their reliance on between-group contrasts constructed from additive terms and interactions, thereby yielding primarily associational evidence <span class="citation" data-cites="breen_effects_2024 song_there_2025">[@breen_effects_2024; @song_there_2025]</span>. Following the causal framework of Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span>, I conceive of the destination class as a treatment, conditioning on the origin class and estimating the heterogeneous effects of the destination with observational data under explicit identification assumptions. To align design and target, I follow the MIDA template <span class="citation" data-cites="blair_research_2023">[@blair_research_2023]</span>: set out the causal model and assumptions (M), define the inquiry and estimand (I), describe the data and variables (D), and detail the answer strategy (A) used to identify the causal effect of intergenerational occupational mobility on preferences for the commodification of pensions.</p>
<section id="a-causal-model-for-mobility-effects" class="level2">
<h2 class="anchored" data-anchor-id="a-causal-model-for-mobility-effects">A Causal Model for Mobility Effects</h2>
<p>Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span>, building on a critical reassessment of the inferential limits of standard mobility models, propose a causal framework that reconceptualizes the “mobility effect” as the treatment effect of reaching a destination class, with impacts heterogeneous by class of origin. The core claim is that typical mobility hypotheses are fundamentally within-person counterfactual comparisons rather than between-person contrasts. Defining mobility as <span class="math inline">\(M = D - O\)</span>; a change from origin <span class="math inline">\((O)\)</span> to destination <span class="math inline">\((D)\)</span>, rather than an additive or interactive combination, places the focus squarely on the Neyman–Rubin problem: for any individual, we observe the result in the social position they currently occupy, but not in the situation of other alternative destinations or immobility.</p>
<p>Exploiting the temporal ordering of origin, destination and outcome, Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span> frame mobility as a treatment process that motivates the causal question: “how would the outcome among people from origin <em>j</em> who entered destination <em>k</em> have been different if those people had, counterfactually, entered destination <em>k’</em> instead?” (p.472). The corresponding estimand is the conditional causal effect of destination given origin. It is of particular interest when <em>k’ = j</em>, i.e., immobility. This estimand compares movers’ observed outcomes with the hypothetical outcomes those same individuals would have exhibited had they remained in their origin class. This formulation provides a coherent potential-outcomes basis for studying how social mobility shape individual preferences and attitudes.</p>
<p>Following Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span>, the identification of causal mobility effects from observational data requires the following assumptions:</p>
<p><strong>Positivity</strong>: For all <span class="math inline">\((j,c)\)</span> in the support of <span class="math inline">\((O,C)\)</span> and for each relevant destination <span class="math inline">\((k)\)</span>, the probability of receiving <span class="math inline">\(D=k\)</span> is strictly between 0 and 1; substantively, each type <span class="math inline">\((O,C)\)</span> has a nonzero probability of entering each comparison destination.</p>
<p><span id="eq-posi"><span class="math display">\[
0&lt;P(D=k\mid O=j, C=c)&lt;1
\tag{1}\]</span></span></p>
<p><strong>Stable Unit Treatment Value Assumption (SUTVA)</strong>: each unit’s potential outcomes <span class="math inline">\(Y_i(D)\)</span> does not depend on the mechanism used to assign treatments (destinations) and by the treatments assigned to other units (also called no interference), assuming a single, well-defined version of each treatment (consistency).</p>
<p><span id="eq-sutva"><span class="math display">\[
Y_i(D_i) = Y_i\big(D_i, D_{-i}\big)\quad \forall, D_{-i}
\tag{2}\]</span></span></p>
<p><strong>Conditional Independence</strong>: Also known as conditional unconfoundedness or exchangeability, this assumption emphasizes that, conditional on origin <span class="math inline">\(O\)</span> and pre-treatment covariates <span class="math inline">\(C\)</span> (e.g., parental education, ethnicity, cohort, early-life factors), assignment to <span class="math inline">\(D\)</span> is as good as random. This underlies IPW and regression adjustment, which seek exchangeability between mobile (treated) and immobile individuals (controls).</p>
<p><span id="eq-indep"><span class="math display">\[
Y(D)\ \perp\kern-5pt \perp D\ \mid\ (O,C)
\tag{3}\]</span></span></p>
<p>Establishing the causal relationship between objective social mobility and subjective outcomes, such as preferences, poses several challenges for causal inference. Below, I use directed acyclic graphs (DAGs) to illustrate some of these challenges and evaluate possible strategies for identifying the effects of social mobility. <a href="#fig-dag" class="quarto-xref">Figure&nbsp;1</a> depicts the causal model guiding identification. In this model, a person’s preference (<span class="math inline">\(Y\)</span>) is directly caused by her class destination (<span class="math inline">\(D\)</span>) and can also be affected by different attributes determined in childhood or earlier (<span class="math inline">\(C\)</span>), such as family resources, household composition, and ascriptive status (pre-treatment confounders). Class origin (<span class="math inline">\(O\)</span>) is determined by those origin-attributes (<span class="math inline">\(C\)</span>) and, in turn, affects destination (<span class="math inline">\(D\)</span>). In addition, unobserved factors (<span class="math inline">\(U\)</span>) can also influence origin-attributes (<span class="math inline">\(C\)</span>). There is no direct arrow from <span class="math inline">\(O\)</span> to <span class="math inline">\(Y\)</span>, reflecting the assumption that the effect of origin on the outcome operates entirely through background factors <span class="math inline">\((C)\)</span> and destination <span class="math inline">\((D)\)</span>. Accordingly, conditioning on <span class="math inline">\((O,C)\)</span> could blocks the relevant back-door paths from <span class="math inline">\(D\)</span> to <span class="math inline">\(Y\)</span>, specifically <span class="math inline">\(D\leftarrow O\leftarrow C\rightarrow Y\)</span> and, if present, <span class="math inline">\(D \leftarrow O \rightarrow Y\)</span>, so <span class="math inline">\((O,C)\)</span> is a minimal sufficient adjustment set for identifying the causal effect of mobility on preferences <span class="citation" data-cites="breen_effects_2024">[@breen_effects_2024]</span>.</p>
<div class="cell fig-cap-location-bottom">
<div class="cell-output-display">
<div id="fig-dag" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-pos="H" data-cap-location="bottom">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dag-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-methods_files/figure-html/fig-dag-1.png" class="img-fluid figure-img" style="width:85.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dag-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Causal graph of the effect of intergenerational social mobility on preferences for commodification. Y = preferences for pension commodification, D = an individual’s class of destination, O = an individual’s class of origin, C = different attributes determined in childhood or earlier that affects an individual’s class of origin and destination. Finally, U = unobserved factors influencing origin attributes.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Why are the assumptions plausible here? Conditional independence is targeted by controlling for a plausible sufficient adjustment set <span class="math inline">\((O,C)\)</span> and by using inverse probability weights obtained via entropy balancing <span class="citation" data-cites="hainmueller_entropy_2012">[@hainmueller_entropy_2012]</span>, which enforce covariate balance within each origin stratum and mitigate selection on observables. Positivity is assessed by inspecting the propensity score and weight distributions and trimming observations with extreme weights, thus restricting inference to regions of common support. SUTVA holds by treating the destination class as a single exposure measured before <span class="math inline">\((Y)\)</span> and assuming no interference. Together, the DAG and assumptions define conditions for identifying the causal effect of intergenerational social mobility on preferences for commodification.</p>
</section>
<section id="inquiry-and-estimand" class="level2">
<h2 class="anchored" data-anchor-id="inquiry-and-estimand">Inquiry and estimand</h2>
<p>The causal inquiry guiding this study asks: How does intergenerational social mobility affect individuals’ preferences for the commodification of pensions in Chile? Substantively, I am interested in the effect of mobility relative to immobility within a given class of origin.</p>
<p>Following the potential outcomes framework proposed by Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024, p.473]</span>, the estimand of interest is an average treatment effect on the treated (ATT) defined within each origin class. I focus on the specific case in which the counterfactual destination corresponds to class immobility <span class="math inline">\((k' = j)\)</span> In other words, I ask how the outcome among people from origin <em>j</em> who entered destination <em>k</em> would have bee different if those people had, counterfactually, remained in origin <em>j</em> instead (inmobility).</p>
<p>Formally, for individuals with origin <span class="math inline">\((O=j)\)</span> who attain destination <span class="math inline">\((D=k)\)</span>, the estimand is:</p>
<p><span id="eq-att"><span class="math display">\[
ATT_{j,k,j} =E[Y(D=k|O=j, D=k)]−E[Y(D=j|O=j, D=k)]
\tag{4}\]</span></span></p>
<p>which represents the mean causal effect of moving from origin class <span class="math inline">\((j)\)</span> to destination class <span class="math inline">\((k)\)</span>, compared to the counterfactual outcome those same individuals would have exhibited had they instead remained in <span class="math inline">\((j)\)</span>. Thus, this ATT captures the counterfactual contrast within origin that lies at the heart of mobility effects: how preferences for market-based pensions would differ if, for the same upwardly or downwardly mobile individuals, their observed destination class were replaced by immobility in their origin class.</p>
</section>
<section id="data-and-variables" class="level2">
<h2 class="anchored" data-anchor-id="data-and-variables">Data and variables</h2>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>This study draws on data from the Chilean Longitudinal Social Survey (ELSOC) of the Center for Social Conflict and Cohesion Studies (COES). This survey is a nationally representative panel study of the urban adult population in Chile, conducted annually between 2016 and 2023. Designed to examine individuals’ attitudes, emotions, and behaviors regarding social conflict and cohesion, ELSOC employs a probabilistic, stratified, clustered, and multistage sampling design covering both major urban centers and smaller cities. The sampling frame was proportionally stratified into six categories of urban population size (e.g., large and small cities), followed by a random selection of households within 1,067 city blocks. The target population includes men and women aged 18 to 75 who are habitual residents of private dwellings.</p>
<p>Because respondent occupation<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> is not measured in every wave, I restrict the analysis to the 2016, 2018, and 2023 waves. After listwise deletion and restricting to key variables (respondent occupation and the outcome measure), the final analytic sample comprises <em>N</em> = 3,435 observations nested within <em>N</em> = 1,787 individuals (2016: 914; 2018: 1,377; 2023: 1,144). Consistent with the study design, estimation proceeds within trajectory-specific subsamples (e.g., low→low; low→middle), retaining movers and matched non-movers from the same origin class. Then, I apply weights to construct the corresponding counterfactual control sample for each trajectory. Following Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span>, I use the three waves in the estimations that follow, allowing for correlation between the observations for each individual in calculating the standard errors (i.e.&nbsp;clustering on the personal identifier).</p>
</section>
<section id="outcome-variable" class="level3">
<h3 class="anchored" data-anchor-id="outcome-variable">Outcome variable</h3>
<p>The outcome variable measures preferences regarding the commodification of pensions, operationalized with a single item addressing how strongly individuals justify conditioning access to old-age pension benefits based on individual income. Respondents were asked: “Is it fair in Chile that people with higher incomes have better pensions than people with lower incomes?” and were asked to indicate their level of agreement on a five-point Likert scale ranging from 1 (“strongly disagree”) to 5 (“strongly agree”). For estimation and interpretability, I dichotomize this item to distinguish endorsement of market-based access from lack of endorsement: values 4–5 indicate agreement with market-based differentiation in pensions (coded as 1), while values 1–3 indicate non-support (coded as 0). In other words, only respondents who actively agree are treated as endorsing commodification, whereas disagreement and neutrality are grouped as not supporting it<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. This binary coding reflects the substantive focus on identifying positive legitimation of market-based allocation rules and yields a clear contrast between respondents who support commodification and those who do not. I use this item for two main reasons: on the one hand, to be able to make comparisons with existing literature <span class="citation" data-cites="lindh_public_2015 otero_power_2024 castillo_perceptions_2025">[@lindh_public_2015; @otero_power_2024; @castillo_perceptions_2025]</span> and, on the other hand, because it captures two fundamental dimensions of market-based welfare distribution: the role of economic resources as a key determinant of outcomes and the framing of services as as tradable commodities that can be bought and sold based on ability to pay <span class="citation" data-cites="lindh_public_2015">[@lindh_public_2015]</span>.</p>
<p><a href="#tbl-summary1" class="quarto-xref">Table&nbsp;1</a> shows the descriptive statistics of the variables used in the study.</p>
<div id="tbl-summary1" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-cap-location="top">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-summary1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Descriptive statistics for all variables.
</figcaption>
<div aria-describedby="tbl-summary1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 42%">
<col style="width: 26%">
<col style="width: 20%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Label</th>
<th style="text-align: left;">Stats / Values</th>
<th style="text-align: left;">Freqs (% of Valid)</th>
<th style="text-align: left;">Valid</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Preference for pension commodification</td>
<td style="text-align: left;">1. Disagree<br>
2. Agree</td>
<td style="text-align: left;">2702 (78.7%)<br>
733 (21.3%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Father stratum</td>
<td style="text-align: left;">1. Low<br>
2. Middle<br>
3. High</td>
<td style="text-align: left;">1122 (32.7%)<br>
1104 (32.1%)<br>
1209 (35.2%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Offspring stratum</td>
<td style="text-align: left;">1. Low<br>
2. Middle<br>
3. High</td>
<td style="text-align: left;">1186 (34.5%)<br>
1110 (32.3%)<br>
1139 (33.2%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parental education</td>
<td style="text-align: left;">Mean (sd) : 4 (2.2)<br>
min &lt; med &lt; max:<br>
1 &lt; 4 &lt; 10<br>
IQR (CV) : 3 (0.6)</td>
<td style="text-align: left;">1 : 222 ( 6.5%)<br>
2 : 905 (26.3%)<br>
3 : 576 (16.8%)<br>
4 : 321 ( 9.3%)<br>
5 : 826 (24.0%)<br>
6 : 30 ( 0.9%)<br>
7 : 214 ( 6.2%)<br>
8 : 75 ( 2.2%)<br>
9 : 245 ( 7.1%)<br>
10 : 21 ( 0.6%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Co-residence with both parents at age 15</td>
<td style="text-align: left;">1. No co-residence<br>
2. Co-residence</td>
<td style="text-align: left;">996 (29.0%)<br>
2439 (71.0%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nacionality</td>
<td style="text-align: left;">1. Non-Chilean<br>
2. Chilean</td>
<td style="text-align: left;">62 ( 1.8%)<br>
3373 (98.2%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sex</td>
<td style="text-align: left;">1. Male<br>
2. Female</td>
<td style="text-align: left;">1507 (43.9%)<br>
1928 (56.1%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age (in years)</td>
<td style="text-align: left;">Mean (sd) : 42.6 (12.5)<br>
min &lt; med &lt; max:<br>
18 &lt; 43 &lt; 75<br>
IQR (CV) : 21 (0.3)</td>
<td style="text-align: left;">58 distinct values</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Indigenous ethnicity</td>
<td style="text-align: left;">1. Non-indigenous<br>
2. Indigenous</td>
<td style="text-align: left;">3035 (88.4%)<br>
400 (11.6%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Meritocracy perception</td>
<td style="text-align: left;">1. Low<br>
2. High</td>
<td style="text-align: left;">2741 (79.8%)<br>
694 (20.2%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wave</td>
<td style="text-align: left;">1. 2016<br>
2. 2018<br>
3. 2023</td>
<td style="text-align: left;">914 (26.6%)<br>
1377 (40.1%)<br>
1144 (33.3%)</td>
<td style="text-align: left;">3435<br>
(100.0%)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="treatment" class="level3">
<h3 class="anchored" data-anchor-id="treatment">Treatment</h3>
<section id="intergenerational-occupational-mobility" class="level4">
<h4 class="anchored" data-anchor-id="intergenerational-occupational-mobility">Intergenerational occupational mobility</h4>
<p>I treat intergenerational occupational mobility as an exposure indicating whether respondents occupy a different socioeconomic status than their fathers, closely following Breen and Ermisch’s <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span> causal framework. Class assignment proceeds in two steps. First, I derive status for both origin (father) and destination (respondent) from two-digit ISCO-08 occupations using the International Socio-Economic Index of Occupational Status (ISEI). ISEI is a hierarchical, unidimensional scale that locates occupations by incumbents’ average education and earnings and was explicitly designed to harmonize occupational stratification across other class schemes and socioeconomic status measures <span class="citation" data-cites="ganzeboom_internationally_1996">[@ganzeboom_internationally_1996]</span>, thereby supporting cross-study comparability <span class="citation" data-cites="barozet_measurement_2021a">[@barozet_measurement_2021a]</span>. Second, I group both origin and destination ISEI scores into terciles (low, middle, high), yielding a three-category schema for origin and destination stratums (see <a href="#tbl-matrix" class="quarto-xref">Table&nbsp;2</a>). Substantively, I use ISEI because occupation-based measures capture structural locations that organize life chances and attitudes more directly than income alone: they bundle access to the means of production, qualification credentials, and the authority/power inherent in labor relations; central dimensions of stratification and inequality <span class="citation" data-cites="barone_rise_2022 wrightUnderstandingClass2015">[@barone_rise_2022; @wrightUnderstandingClass2015]</span>. In short, using ISEI aligns the measurement of origin and destination on a common vertical status continuum that is theoretically meaningful for social mobility research and empirically feasible given the available information of ELSOC’s data.</p>
<div id="tbl-matrix" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-cap-location="top">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Occupational mobility by occupational groups.
</figcaption>
<div aria-describedby="tbl-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table table-striped cell caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Father↓</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Offspring→</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Low</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Middle</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">High</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Low</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">44.7% (501)</td>
<td style="text-align: center;">33.6% (377)</td>
<td style="text-align: center;">21.7% (244)</td>
<td style="text-align: center;">100.0% (1,122)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Middle</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">35.1% (388)</td>
<td style="text-align: center;">34.9% (385)</td>
<td style="text-align: center;">30.0% (331)</td>
<td style="text-align: center;">100.0% (1,104)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">High</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">24.6% (297)</td>
<td style="text-align: center;">28.8% (348)</td>
<td style="text-align: center;">46.7% (564)</td>
<td style="text-align: center;">100.0% (1,209)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Total</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">34.5% (1,186)</td>
<td style="text-align: center;">32.3% (1,110)</td>
<td style="text-align: center;">33.2% (1,139)</td>
<td style="text-align: center;">100.0% (3,435)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="pre-treatment-control-variables-for-selection-into-treatment" class="level4">
<h4 class="anchored" data-anchor-id="pre-treatment-control-variables-for-selection-into-treatment">Pre-treatment control variables for selection into treatment</h4>
<p>Within each origin stratum <span class="math inline">\(O=j\)</span>, I estimate average treatment effects on the treated (ATT) by comparing movers to otherwise similar non-movers from the same origin. To adjust for selection into mobility, I reweight only the control group (immobile) using entropy balancing so that the distribution of pre-treatment origin covariates <span class="math inline">\(C\)</span> matches that of the treated on selected moments.</p>
<p>The selection of the adjustment set <span class="math inline">\(C\)</span> follows two principles. First, it mirrors the logic in Breen and Ermisch <span class="citation" data-cites="breen_effects_2024">[-@breen_effects_2024]</span>—who condition on attributes determined in childhood or earlier (e.g., parental resources, household structure, ascriptive traits)—and, second, it is constrained to origin-side characteristics available in ELSOC. Guided by theory and Chilean evidence on relative mobility determinants <span class="citation" data-cites="brunori_inequality_2025 celhay_intergenerational_2010 espinoza_movilidad_2014 torche_unequal_2005">[mainly @brunori_inequality_2025; @celhay_intergenerational_2010; @espinoza_movilidad_2014;@torche_unequal_2005]</span>, I include six covariates covering family resources, household composition, and ascriptive status: (a) parental education (highest of father/mother), 10 categories coded ordinally from no schooling to postgraduate studies; (b) co-residence with both parents at age 15 (0 = no, 1 = yes); (c) nationality (0 = non-Chilean, 1 = Chilean); (d) age in years; (e) sex (0 = male, 1 = female); and (f) indigenous ethnicity (0 = no, 1 = yes). These variables are fixed before the destination class, plausibly affect selection into mobility, and constitute the maximal origin set in ELSOC, thereby making the conditional independence assumption more credible within each <span class="math inline">\(O=j\)</span>.</p>
<p>After balancing, I construct stabilized IPW, setting treated weights to 1 and assigning derived weights to controls, thus aligning the counterfactual distribution of non-movers with the covariate profile of movers in each origin stratum (see <a href="#anexo">Supplementary Material</a> for the evaluation of balance). These weights are then used in the outcome stage to estimate the causal effect of mobility on preferences for the commodification of pensions.</p>
</section>
</section>
<section id="effect-heterogeneity" class="level3">
<h3 class="anchored" data-anchor-id="effect-heterogeneity">Effect heterogeneity</h3>
<p>To test heterogeneity in mobility effects, I examine two moderators: meritocratic perceptions and time. Meritocracy is captured with two items <span class="citation" data-cites="young_rise_1958">[@young_rise_1958]</span>, one referring to effort (“In Chile, people are rewarded for their efforts”) and one to talent (“In Chile, people are rewarded for their intelligence and skills”), each answered on a five-point Likert scale (1 = “strongly disagree” to 5 = “strongly agree”). I average the two items into a single index and dichotomize it into low meritocracy (≤ 3) and high meritocracy (≥ 4). Time is measured by survey wave (2016, 2018, 2023) and entered as a categorical (dummy) variable. Both variables are used as moderators by interacting them with the mobility treatment to assess conditional average treatment effects—i.e., whether the effect of mobility varies across levels of meritocratic perceptions or across survey waves.</p>
</section>
<section id="controls" class="level3">
<h3 class="anchored" data-anchor-id="controls">Controls</h3>
<p>All models include the same pre-treatment covariates <span class="math inline">\(C\)</span> used in the IPW construction, not to re-balance groups (entropy balancing already does so), but to (i) block backdoor paths from <span class="math inline">\(C\)</span> to the outcome <span class="math inline">\(Y\)</span> as implied by the DAG, and (ii) achieve double robustness: estimates remain consistent if either the weighting model or the outcome model is correctly specified. Concretely, I adjust for (a) father’s educational level, (b) co-residence with both parents at age 15, (c) nationality, (d) age, (e) sex, and (f) ethnicity, along with wave fixed effects to absorb secular trends.</p>
</section>
</section>
<section id="analytical-strategy" class="level2">
<h2 class="anchored" data-anchor-id="analytical-strategy">Analytical strategy</h2>
<p>Because the dependent variable—the preference for pension commodification—is binary <span class="math inline">\((Y_{it}\in{0,1})\)</span>, I estimate weighted linear probability models (WLS) using stabilized inverse probability weights (IPW) obtained via entropy balancing. Although OLS estimator is often questioned with binary outcomes, it’s unbiased. It consistently estimates the conditional expectation <span class="math inline">\(E(Y|X)\)</span> under standard exogeneity <span class="math inline">\(E[\varepsilon_i|X_i]=0\)</span>, with heteroskedasticity addressed by robust or clustered errors <span class="citation" data-cites="wooldridge_introductory_2009">[@wooldridge_introductory_2009, ch. 7.5]</span>. WLS further improves efficiency under heteroskedasticity or unequal sampling probabilities <span class="citation" data-cites="wooldridge_introductory_2009">[@wooldridge_introductory_2009, ch. 8.4]</span>. Following Gelman, Hill, and Vehtari <span class="citation" data-cites="gelman_regression_2020">[-@gelman_regression_2020, pp. 270–272]</span>, IPW-weighted regression transparently targets the ATT by recreating the counterfactual distribution. Linear models are preferred here because coefficients are average probability differences; nonlinear models (logit/probit) complicate weighting and interpretation <span class="citation" data-cites="gelman_regression_2020">[@gelman_regression_2020, ch. 13]</span>.</p>
<p>Formally, the model is:</p>
<p><span id="eq-final"><span class="math display">\[
Y_{it}=\alpha+\beta T_i+X_i'\gamma+\lambda_t+\varepsilon_{it}
\tag{5}\]</span></span></p>
<p>where <span class="math inline">\(Y_{it}\)</span> indicates whether individual <span class="math inline">\(i\)</span> in wave <span class="math inline">\(t\)</span> supports more market-based pension access; <span class="math inline">\(\alpha\)</span> is the baseline probability for the reference categories; <span class="math inline">\(\beta T_i\)</span> captures the intergenerational mobility contrast: <span class="math inline">\(T_i=1\)</span> when the observed destination is <span class="math inline">\(D_i=k\)</span> (mobile to <span class="math inline">\(k\)</span>) and <span class="math inline">\(T_i=0\)</span> when <span class="math inline">\(D_i=j\)</span> (immobile), so that <span class="math inline">\(\beta\)</span> is the ATT within origin <span class="math inline">\(O=j (\widehat\beta=\widehat{ATT}{j,k\mid j})\)</span>, i.e., the percentage-point change in the probability of preferring pension commodification from reaching <span class="math inline">\(k\)</span> rather than remaining in <span class="math inline">\(j\)</span>. The term <span class="math inline">\(X_i'\gamma\)</span> includes the pre-treatment covariates <span class="math inline">\((C)\)</span> used to construct the entropy-balancing weights; <span class="math inline">\(\lambda_t\)</span> are wave fixed effects; and <span class="math inline">\(\varepsilon_{it}\)</span> is idiosyncratic error. The analytic sample is restricted to individuals sharing the same origin <span class="math inline">\((O=j)\)</span>. Therefore, estimation uses pooled WLS with stabilized IPW–ATT from entropy balancing and CR2 standard errors clustered by individual to address heteroskedasticity and within-person dependence.</p>
<p>The specification is doubly robust: entropy-balancing weights are combined with covariate adjustment so consistency holds if either the weighting model or the outcome model is correctly specified, while also improving efficiency <span class="citation" data-cites="wooldridge_introductory_2009">[@wooldridge_introductory_2009]</span>. These results are virtually identical to baseline models without covariates (see <a href="#anexo">Supplementary Material</a> for complete models), with no substantive changes in the mobility coefficients. In addition, I assess causal heterogeneity by interacting the mobility treatment with (i) meritocratic perceptions and (ii) survey wave, reporting simple slopes (origin-specific ATTs) by moderator levels. To evaluate sensitivity to unmeasured confounding, I compute E-values for point estimates and confidence limits <span class="citation" data-cites="ding_sensitivity_2016">[@ding_sensitivity_2016]</span>. To address multiplicity across the six mobility trajectories, I also report Holm-adjusted p-values alongside 95% confidence intervals.</p>
<p>All the analyses were conducted using R software and the <em>lm_robust</em> package.</p>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Parental occupation was collected only in 2023 as open-text labels. I coded these texts to the ISCO-08 two-digit scheme using the National Institute of Statistics of Chile’s automated coding API and retained cases with high-confidence matches (&gt;95%). Treating parental occupation as a time-invariant origin attribute, I carried these codes back to 2016 and 2018.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A potential concern is that the neutral category may reflect genuine ambivalence rather than disagreement. To address this, I conduct robustness checks using alternative codings: (i) excluding neutral respondents from the analysis; (ii) combining the neutral and agreement categories (3–5 vs.&nbsp;1–2); and (iii) estimating models with the original 5-point scale using linear specifications. The main mobility effects reported below are substantively unchanged across these specifications (see <a href="#anexo">Supplementary Material</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>